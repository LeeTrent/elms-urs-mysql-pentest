// using System;
// using System.Collections.Generic;
// using System.Linq;
// using System.Threading.Tasks;
// using Microsoft.AspNetCore.Identity;
// using Microsoft.AspNetCore.Mvc;
// using Microsoft.Extensions.Logging;
// using lmsextreg.Data;
// using lmsextreg.Constants;
// using lmsextreg.Services;

// namespace lmsextreg.Controllers
// {
//     [Route("[controller]/[action]")]
//     public class AccountController : Controller
//     {
//         private readonly SignInManager<ApplicationUser> _signInManager;
//         private readonly ILogger _logger;
//         private readonly IEventLogService _eventLogService;

//         public AccountController
//         (
//             SignInManager<ApplicationUser> signInManager,
//             ILogger<AccountController> logger,
//             IEventLogService eventLogSvc
//         )
//         {
//             _signInManager = signInManager;
//             _logger = logger;
//             _eventLogService = eventLogSvc;
//         }

//         [HttpPost]
//         [ValidateAntiForgeryToken]
//         public async Task<IActionResult> Logout()
//         {
//             System.Console.WriteLine("[AccountController][Logout] >> BEGIN");

//             var user = _signInManager.UserManager.GetUserAsync(User).Result;
//             if (user != null)
//             {
//                 ///////////////////////////////////////////////////////////////////
//                 // Log the 'LOGOUT' event
//                 ///////////////////////////////////////////////////////////////////
//                 _eventLogService.LogEvent(EventTypeCodeConstants.LOGOUT, user);   
//             }            

//             Console.WriteLine("\n[AccountController][Logout] => Invoking _signInManager.SignOutAsync() ...");
//             await _signInManager.SignOutAsync();
//             _logger.LogInformation("User logged out.");
            
//             // Console.WriteLine("\n[AccountController][Logout] => Invoking HttpContext.Session.Clear() ...");
//             // HttpContext.Session.Clear();
  
//             Console.WriteLine("\n[AccountController][Logout] => BEGIN: Deleting Cookies");
//             foreach (var cookieKey in Request.Cookies.Keys)
//             {
//                Console.WriteLine("[AccountController][Logout][cookieKey]=> " + cookieKey);
//                Response.Cookies.Delete(cookieKey);
//             //    HttpContext.Session.Remove(cookieKey);
//             }
//             Console.WriteLine("\n[AccountController][Logout] => END: Deleting Cookies");            

//             System.Console.WriteLine("[AccountController][Logout] >> END (redirecting to /Index)");
//             return RedirectToPage("/Index");
//         }
//     }
// }
